# TCP高可用性笔记

## 半打开 半关闭 半连接状态

### 半连接

三次握手中，主动发起握手的一方不发最后一次ACK，使得服务器端阻塞在SYN_RECV状态

半连接攻击`(SYN攻击)`: 会耗尽服务器资源，使得真正的请求无法建立连接

### 半打开

一方异常关闭，而另一方并不知情。处于半打开的状态;需要在应用层引入心跳机制，以检测半打开状态，检测到了发送RST重新建立连接

### 半关闭

对应TCP四次挥手的 FIN_WAIT_2状态: 主动方发起FIN, 并且被动方返回ACK; 主动发不再发起数据传输; 但被动方仍进行数据传输


## 在应用层里进行提高UDP可靠性传输

传输层无法保证数据的可靠传输，只能通过应用层来实现了。实现的方式可以参照tcp可靠性传输的方式，只是实现不在传输层，实现转移到了应用层。

1. 提供超时重传，能避免数据报丢失。

2. 提供确认序列号，可以对数据报进行确认和排序。

