# 监控、链路追踪与日志总结

## 监控

- 把需要关注的指标采集起来，形成报告，并对需要关注的异常数据进行分析形成告警

- 采集特点: 低频、定期、定量；对象为机器指标

- 架构简单, 不适宜进行高并发、大数据的指标采集

### 架构模式

- Prometheus 以Pull模式，Http去采集指标数据; 对于部分指标，客户端利用push-gateway推送指标数据

- 以TSDB（时序数据库）存储数据, 搭配数据可视化

## 链路追踪

- 对每一个事件(接口调用:api/rpc)进行追踪, 相关标准: opentracing

- 特点: 高频、数据量大，具备一定数据格式；按需配置采集的规则，避免耗费过量资源进行相关追踪；

- 流程: 本地磁盘IO上做日志, 通过本地Agent把文本日志数据发送到聚合服务器上(collector)，或在聚合服务器和本地的Agent之间做消息队列，让聚合服务器慢慢消化巨量的消息。

## 日志

- 日志聚合系统，其特点和Tracing基本一致，也是需要处理高频并发和巨大的数据量

- 需要具备检索查询能力；日志聚合，提取相关报告等
