# Redis Big Keys 引发异常

## 含义

单个key里，数据量太大, 内存过大; 每种数据类型(string/list/set/zset)都会存在

检测手段: `redis-cli --bigkeys` 工具查看应用里存在BigKeys的情况

## 影响/现象

1. 对于Redis集群里，若某分片里，Bigkey存在，会导致引发超出内存的异常情况(内存达到maxmemory) 某个节点存在大key，这个节点比其他节点内存使用率高很多

2. BigKey存在，易导致主从同步缓慢，删除过程耗时长, 易产生阻塞/引发慢查询

## 处理

1. 对key里的数据进行拆分处理; 打散分不到不同的分片中，避免因为数据倾斜导致的数据分布不均。

其他的类型的数据也可以按照相同的方式进行拆分重组，从而避免大KEY带来的影响。

2. 对业务预估准确、及时进行处理垃圾数据等

## 延伸

### redis的key过长的影响

- 若key超过1024byte, 会对性能产生影响；涉及redis存储key的内存与查询key的过程

- 限制最大的key为512MB; 任何二进制序列都能被作为key; 空字符串也能当作为key

- key根据业务需求, 设置清晰, 可读性好的命名
